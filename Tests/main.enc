-- For testing purpose

import Bigvar

active class Main
    def main() : unit
        var bigvar = randombigvar(20,30)
        bigvar.push(25)

        printi(bigvar)
        var result = bigvar.filter(fun(v:int) => v > 18)
        result.update(fun(v:int) => (v*4))
        result.applyto(result.size()-1,fun(v:int) => v-100)

        result.array()

        printi(result)

        var people_array = [new Person("Josef",21),
                            new Person("Erik",22),
                            new Person("Sahand",17),
                            new Person("Joel",15),
                            new Person("Basse",22)]

        var people = new Bigvar[Person](people_array)
        var person_to_string = fun(p:Person) => p.name

        people.print(person_to_string)
        var over18 = people.filter(fun(p:Person) => p.age > 18)
        over18.delete(0)
        over18.print(person_to_string)

        var names = people.getstringdata(fun(p:Person) => p.getname())
        names.insert(1,"Dave")
        names.push("Tobias")
        prints(names)
    end
end

fun printi(bigvar:Bigvar[int]) : unit
    bigvar.print(fun(v:int) => string_from_int(v))
end

fun prints(bigvar:Bigvar[String]) : unit
    bigvar.print(fun(v:String) => v)
end

read class Person
    val name : String
    val age : int
    def init(name:String, age:int) : unit
        this.name = name
        this.age = age
    end

    def getname() : String
        this.name
    end
end
