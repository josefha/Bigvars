module ExampleText

EMBED
uint64_t strHash(char* input);
BODY
uint64_t strHash(char* input) {
    uint64_t hash = 5381;
    char *str = input;
    int c;

    while ((c = *str++))
        hash = ((hash << 5) + hash) + c;
    return hash;
}
END

fun stringID_NEW(s : String) : uint
    var ans = EMBED (uint) (uint64_t) strHash(#{s.getData()}); END
    ans
end

fun intID(key : int) : uint
    EMBED (uint) (uint64_t) #{key}; END
end

fun specText() : String
    "The Programming Languages Group at Uppsala University is developing a programming language called Encore.
    Encore is a object oriented language with the actor model and a focus on parallelism.
    The compiler is written in Haskell and translates Encore code to C code, which can then be compiled with a C compiler.
    The project assignment is to extend the features of Encore and implement a library for Bigvars.
    'Arrays in Encore are stored in one actor resulting in operations on arrays being executed sequentially.
    Encore is also lacking syntactic support for easy programming of data structures distributed across actors.
    Bigvars will be a data type with a collection of values that are distributed among many actors.
    Operations on Bigvars could therefor be executed in parallel.
    Bigvars would also make it easier syntactically for the programer to programming with big collections of data.
    For example if you have an Bigvar of customer objects,
    then doing `.account` would automatically apply the `.account` method to all customers.
    One possible implementation of Bigvars in Encore would be to split the data between many
    actors and have all those actors report to other actors that act like supervisors.
    The supervisors would coordinate all workers and hold meta information about specific parts of the Bigvar.
    I will start the project with researching similar implementation in other languages, like Julias distributed arrays and Java 8 parallel streams.
    I will then decide how to best implement Bigvars in Encore.
    Most of the time will be spent on the actually implementation, Bigvars will be implemented as a library written in Encore.
    The first step of the implementation part will be to provide support for distributed arrays with basic array functionality
    and with a fixed number of underlying actors. The second step will be to have a dynamic number of underlaying actors and add
    some advanced functionality like object method calls and math functions. The third step will be to provide similar support
    as for distributed arrays to distributed Hash-tables. Lastly research if syntactical support from the encore compiler is
    needed and if it is devise a syntax, a compilation scheme and implement it. Also investigate and possible implement support
    for more datatypes such as distributed Sets. Tests and measurements of my implementation is also a priority.
    The Programming Languages Group at Uppsala University is developing a programming language called Encore.
    Encore is a object oriented language with the actor model and a focus on parallelism.
    The compiler is written in Haskell and translates Encore code to C code, which can then be compiled with a C compiler.
    The project assignment is to extend the features of Encore and implement a library for Bigvars.
    'Arrays in Encore are stored in one actor resulting in operations on arrays being executed sequentially.
    Encore is also lacking syntactic support for easy programming of data structures distributed across actors.
    Bigvars will be a data type with a collection of values that are distributed among many actors.
    Operations on Bigvars could therefor be executed in parallel.
    Bigvars would also make it easier syntactically for the programer to programming with big collections of data.
    For example if you have an Bigvar of customer objects,
    then doing `.account` would automatically apply the `.account` method to all customers.
    One possible implementation of Bigvars in Encore would be to split the data between many
    actors and have all those actors report to other actors that act like supervisors.
    The supervisors would coordinate all workers and hold meta information about specific parts of the Bigvar.
    I will start the project with researching similar implementation in other languages, like Julias distributed arrays and Java 8 parallel streams.
    I will then decide how to best implement Bigvars in Encore.
    Most of the time will be spent on the actually implementation, Bigvars will be implemented as a library written in Encore.
    The first step of the implementation part will be to provide support for distributed arrays with basic array functionality
    and with a fixed number of underlying actors. The second step will be to have a dynamic number of underlaying actors and add
    some advanced functionality like object method calls and math functions. The third step will be to provide similar support
    as for distributed arrays to distributed Hash-tables. Lastly research if syntactical support from the encore compiler is
    needed and if it is devise a syntax, a compilation scheme and implement it. Also investigate and possible implement support
    for more datatypes such as distributed Sets. Tests and measurements of my implementation is also a priority.
    end"
end
