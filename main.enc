-- For testing purpose

import Bigvar

class Main
    def main() : unit
        var bigvar = randombigvar(20,30)
        bigvar.push(25)

        printi(bigvar)
        var result = bigvar.filter(fun(v:int) => v > 18)
        result.map(fun(v:int) => (v*4))
        result.applyto(result.size()-1,fun(v:int) => v-100)

        printi(result)

        var people_array = [new Person("Josef",21),
                            new Person("Erik",22),
                            new Person("Sahand",17),
                            new Person("Joel",15),
                            new Person("Basse",22)]

        var people = new Bigvar[Person](people_array)
        var person_to_string = fun(p:Person) => p.name

        people.print(person_to_string)
        var over18 = people.filter(fun(p:Person) => p.age > 18)
        over18.delete(0)
        over18.print(person_to_string)

        var bigvarnames = people.getstringdata(fun(p:Person) => p.name)
        bigvarnames.insert(1,"Dave")
        bigvarnames.push("Tobias")
        prints(bigvarnames)

    end
end

fun printi(bigvar:Bigvar[int]) : unit
    bigvar.print(fun(v:int) => string_from_int(v))
end

fun prints(bigvar:Bigvar[String]) : unit
    bigvar.print(fun(v:String) => v)
end

passive class Person
    var name : String
    var age : int
    def init(name:String, age:int) : unit
        this.name = name
        this.age = age
    end

    def getname() : String
        this.name
    end
end
